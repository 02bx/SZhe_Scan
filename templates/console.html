<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>consolePage</title>
    <link rel="stylesheet" href="{{url_for('static',filename='css/baseOne.css')}}" />
    <link rel="stylesheet" href="{{url_for('static',filename='css/console.css')}}" />
    <link rel="stylesheet" href="{{url_for('static',filename='css/font-awesome.min.css')}}" />
    <script src="{{url_for('static',filename='js/home.js')}}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.1.1/Chart.js"></script>
</head>

<body style="overflow-x:hidden;">
    <header class="header" id="header">
        <div class="container">
            <div class="top">
                <h1>
                    <a href="#" title="Web漏洞扫描器">SZHE</a>
                </h1>
                <div class="userCenter">
                    <ul class="userCenter-list" role="tablist">
                        <li><a href="#" role="tab">个人中心</a></li>
                        <li><a href="{{url_for('logout')}}" role="tab">注销</a></li>
                    </ul>
                </div>
            </div>
            <hr />
            <nav class="navigation" id="nav">
                <ul class="navList" id="myTab" role="tabList">
                    <li><a href="{{url_for('index')}}" role="tab" class="one">主页</a></li>
                    <li><a href="#" role="tab" class="two">控制台</a></li>
                    <li><a href="#" role="tab">漏洞列表</a></li>
                    <li><a href="#" role="tab">扫描队列</a></li>
                    <li><a href="#" role="tab">信息搜集</a></li>
                    <li><a href="{{url_for('log_detail')}}" role="tab">日志</a></li>
                    <li><a href="#" role="tab">设置</a></li>
                    <li><a href="{{url_for('about')}}" role="tab">关于</a></li>
                    <div class="slider"></div>
                </ul>
                <div class="search-box">
                    <input class="search-txt" type="text" name="" placeholder="  search..." />
                    <a class="search-btn" href="#">
                        <i class="fa fa-search"></i>
                    </a>
                </div>
            </nav>
            <div class="burger">
                <div class="burger-line1"></div>
                <div class="burger-line2"></div>
                <div class="burger-line3"></div>
            </div>
        </div>
    </header>
    <div class="context">
        <div class="left-context" style="display:block;">
            <div class="statistic">
                <h5 style="vertical-align: middle;">漏洞等级分布图</h5>
                <div id="container" style="height: 250px;width:90%;top:0px;text-align: center;vertical-align: middle;">
                </div>
            </div>
            <div class="skills" style="display:block;">
                <h2>漏洞类型统计</h2>
                <div class="skill">
                    <div class="skill-name">类型一</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="90">
                        </div>
                    </div>
                </div>

                <div class="skill">
                    <div class="skill-name">类型二</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="30">
                        </div>
                    </div>
                </div>

                <div class="skill">
                    <div class="skill-name">类型三</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="164">
                        </div>
                    </div>
                </div>

                <div class="skill">
                    <div class="skill-name">类型四</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="35">
                        </div>
                    </div>
                </div>

                <div class="skill">
                    <div class="skill-name">类型五</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="60">
                        </div>
                    </div>
                </div>

                <div class="skill">
                    <div class="skill-name">类型六</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="78">
                        </div>
                    </div>
                </div>

                <div class="skill">
                    <div class="skill-name">类型七</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="39">
                        </div>
                    </div>
                </div>

                <div class="skill">
                    <div class="skill-name">类型七</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="21">
                        </div>
                    </div>
                </div>
                <div class="skill">
                    <div class="skill-name">类型八</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="58">
                        </div>
                    </div>
                </div>
                <div class="skill">
                    <div class="skill-name">类型九</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="73">
                        </div>
                    </div>
                </div>
                <div class="skill ten">
                    <div class="skill-name">类型十</div>
                    <div class="skill-bar">
                        <div class="skill-per" per="84">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="right-context">
            <div class="content-wrapper">
                <div class="features">
                    <div class="feature one">
                        <i class="fa fa-tags"></i>
                        <h3 class="right-title">域名</h3>
                        <p class="right-content">总数:</p>
                    </div>

                    <div class="feature one">
                        <i class="fa fa-magnet"></i>
                        <h3 class="right-title">IP</h3>
                        <p class="right-content">总数:</p>
                    </div>
                    <div class="feature one">
                        <i class="fa fa-bug"></i>
                        <h3 class=" right-title">漏洞</h3>
                        <p class="right-content">总数：</p>
                    </div>
                    <div class="feature one">
                        <i class="fa fa-clipboard"></i>
                        <h3 class="right-title">POC</h3>
                        <p class="right-content">总数：</p>
                    </div>
                </div>
                <div class="contents">
                    <div class="content">
                        <i class="fa fa-bar-chart"></i>
                        <h3>本周扫描数</h3>
                        <h5>111</h5>
                    </div>
                    <div class="content">
                        <i class="fa fa-desktop"></i>
                        <h3>受影响主机</h3>
                        <h5>111</h5>
                    </div>
                    <div class="content">
                        <i class="fa fa-exclamation-circle" style="font-size: 38px;"></i>
                        <h3>严重漏洞</h3>
                        <h5>111</h5>
                    </div>
                    <div class="content">
                        <i class="fa fa-github" style="font-size: 38px;"></i>
                        <h3>泄露总数</h3>
                        <h5>111</h5>
                    </div>

                </div>
            </div>
            <div class="content-mid">
                <div class="content-mid-left">
                    <textarea rows="10" cols="30">请输入新建任务：</textarea>
                    <button class="newtask" type="submit">新建任务</button>
                </div>
                <div class="content-mid-right">
                    <p class="p1">待扫描:10</p>
                    <p class="p2">正扫描:10</p>
                    <p class="p3">已扫描:10</p>
                </div>
            </div>
            <div class="charts">
                <div class="bar-graph">
                    <h5 class="bar-title">开放端口</h5>
                    <canvas id="myChart" width="850" height="400"></canvas>
                </div>
                <div class="curve-graph">
                    <h5 class="bar-title">任务报告
                    </h5>
                    <canvas id="myCurveChart" width="850" height="400"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="body-tail">
        Copyright @ SZHE Vulnerability Scanner
    </div>
    <script>

        //漏洞类型部分
        $('.skill-per').each(function () {
            var $this = $(this);
            var per = $this.attr('per');
            $this.css("width", per);
            $({ animatedValue: 0 }).animate(
                { animatedValue: per },
                {
                    duartion: 300,
                    step: function () {
                        $this.attr('per', Math.floor(this.animatedValue));
                    },
                    complete: function () {
                        $this.attr('per', Math.floor(this.animatedValue));
                    },
                }
            );
        });

        //饼状图部分
        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        var app = {};

        app.title = "百分比";

        var option = {
            tooltip: {
                trigger: "item",
                formatter: "{a} <br/>{b}: {c} ({d}%)",
            },
            color: ["#90ee90", "#7342fa", "#fdb903", "#e9003a",],
            legend: {
                orient: "horizontal",
                x: "center",
                data: ["低危", "中危", "高危", "严重"],
            },
            series: [
                {
                    name: "漏洞属性",
                    type: "pie",
                    radius: ["30%", "70%"],
                    avoidLabelOverlap: false,
                    label: {
                        normal: {
                            show: false,
                            position: "center",
                        },
                        emphasis: {
                            show: true,
                            textStyle: {
                                fontSize: "20",
                                fontWeight: "bold",
                            },
                        },
                    },
                    labelLine: {
                        normal: {
                            show: false,
                        },
                    },
                    data: [
                        {
                            value: 135,
                            name: "低危",
                        },
                        {
                            value: 170,
                            name: "中危",
                        },
                        {
                            value: 234,
                            name: "高危",
                        },
                        {
                            value: 265,
                            name: "严重",
                        },
                    ],
                },
            ],
        };
        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        }

        // 柱状图部分
        var ctx = document.getElementById("myChart").getContext("2d");
        var data = {
            /// 表现在X轴上的数据，数组形式
            labels: ["http", "ssh", "mysql", "http-proxy", "mongod", "ftp", "wap-wsp", "http-alt", "ms-wbt-server", "https", "redis"],
            /// 第一条线
            datasets: [
                {
                    /// 曲线的填充颜色
                    fillColor: " rgb(86, 86, 240)",
                    /// 填充块的边框线的颜色
                    strokeColor: " rgb(22, 122, 253);",
                    /// 表示数据的圆圈的颜色
                    pointColor: " rgb(86, 86, 240)",
                    /// 表示数据的圆圈的边的颜色
                    pointStrokeColor: "#fff",
                    data: [95.5, 59.2, 43, 41, 36, 25, 20, 19, 17, 11, 3]
                },
                /// 第二条线
                {

                    /// 曲线的填充颜色
                    fillColor: "#d3d3d3",
                    /// 填充块的边框线的颜色
                    strokeColor: "rgba(220,220,220,1)",
                    /// 表示数据的圆圈的颜色
                    pointColor: "rgba(220,220,220,1)",
                    /// 表示数据的圆圈的边的颜色
                    pointStrokeColor: "#fff",
                    data: [27, 48, 40, 19, 36, 27, 10, 8, 5, 3, 2]

                }
            ]
        }
        /// 动画效果call
        var options = {
            scaleFontStyle: "normal"
        }
        //生成柱状图
        new Chart(ctx).Bar(data);


        // 折线图部分
        var ctx = document.getElementById("myCurveChart").getContext("2d");
        var data = {
            /// 表现在X轴上的数据，数组形式
            labels: ["http", "ssh", "mysql", "http-proxy", "mongod", "ftp", "wap-wsp", "http-alt", "ms-wbt-server", "https", "redis"],
            /// 第一条线
            datasets: [
                {
                    /// 曲线的填充颜色
                    fillColor: " #f8f8ff",
                    /// 填充块的边框线的颜色
                    strokeColor: " rgb(86, 86, 240)",
                    /// 表示数据的圆圈的颜色
                    pointColor: " rgb(86, 86, 240)",
                    /// 表示数据的圆圈的边的颜色
                    pointStrokeColor: "#fff",
                    data: [65.5, 59.2, 90, 81, 56, 55, 40, 38, 33, 29, 14]
                },
                /// 第二条线
                {
                    /// 曲线的填充颜色
                    fillColor: "#e3e3e3",
                    /// 填充块的边框线的颜色
                    strokeColor: "rgba(220,220,220,1)",
                    /// 表示数据的圆圈的颜色
                    pointColor: "rgba(220,220,220,1)",
                    /// 表示数据的圆圈的边的颜色
                    pointStrokeColor: "#fff",
                    data: [27, 48, 40, 19, 96, 27, 10, 8, 5, 3, 2]

                }
            ]
        }
        /// 动画效果call
        var options = {
            scaleFontStyle: "normal"
        }
        /// 创建对象，生成折线图表
        new Chart(ctx).Line(data, options);
    </script>
</body>

</html>